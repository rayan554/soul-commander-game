<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Soul Commander - Pixel Command RPG</title>
    <meta name="description" content="Text-based RPG dengan pixel art. Kendalikan pahlawan dengan perintah teks!">
    <meta name="theme-color" content="#6C5CE7">
    
    <!-- Favicon & App Icons -->
    <link rel="icon" type="image/x-icon" href="assets/icons/favicon.ico">
    <link rel="apple-touch-icon" href="assets/icons/icon-192.png">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    
    <!-- Fonts -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Orbitron:wght@400;700&display=swap">
    <link rel="stylesheet" href="style.css">
    
    <!-- Service Worker Registration -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('sw.js')
                    .then(reg => console.log('‚úÖ Service Worker registered'))
                    .catch(err => console.log('‚ùå Service Worker failed:', err));
            });
        }
    </script>
</head>
<body>
    <!-- Loading Screen -->
    <div id="loadingScreen" class="loading-screen">
        <div class="loading-content">
            <div class="loading-logo">
                <div class="pixel-logo">‚öîÔ∏è</div>
                <h1>SOUL COMMANDER</h1>
                <div class="loading-subtitle">Pixel Command RPG</div>
            </div>
            <div class="loading-bar-container">
                <div class="loading-bar" id="loadingBar"></div>
            </div>
            <div class="loading-tip" id="loadingTip">Loading game assets...</div>
        </div>
    </div>

    <!-- Main Game Container -->
    <div class="game-container" id="gameContainer" style="display: none;">
        <!-- Game Header -->
        <header class="game-header">
            <div class="header-left">
                <div class="game-title">
                    <span class="title-icon">‚öîÔ∏è</span>
                    <h1>SOUL COMMANDER</h1>
                </div>
                <div class="game-version">v1.0.0</div>
            </div>
            
            <div class="header-right">
                <div class="online-status">
                    <span class="status-dot" id="statusDot">‚óè</span>
                    <span id="playerCount">1</span> players online
                </div>
                <button class="menu-btn" id="menuBtn" onclick="toggleMenu()">‚ò∞</button>
            </div>
        </header>

        <!-- Dropdown Menu -->
        <div class="dropdown-menu" id="dropdownMenu">
            <button class="menu-item" onclick="saveGame()">üíæ Save Game</button>
            <button class="menu-item" onclick="loadGame()">üìÇ Load Game</button>
            <button class="menu-item" onclick="toggleSound()" id="soundBtn">üîä Sound: ON</button>
            <button class="menu-item" onclick="showSettings()">‚öôÔ∏è Settings</button>
            <button class="menu-item" onclick="showHelp()">‚ùì Help</button>
            <button class="menu-item" onclick="exportData()">üì§ Export Data</button>
            <button class="menu-item" onclick="resetGame()">üîÑ Reset Game</button>
        </div>

        <!-- Main Game Area -->
        <div class="game-area">
            <!-- Left Column: Character & Stats -->
            <div class="left-column">
                <!-- Character Display -->
                <div class="character-section">
                    <div class="character-title">
                        <span class="section-icon">üë§</span>
                        COMMANDER
                    </div>
                    
                    <div class="character-display">
                        <canvas id="characterCanvas" width="128" height="128"></canvas>
                        <div class="character-info">
                            <div class="char-name" id="charName">Knight</div>
                            <div class="char-class" id="charClass">‚öîÔ∏è Warrior</div>
                            <div class="char-level">Level <span id="charLevel">1</span></div>
                        </div>
                    </div>

                    <!-- Health & Stats -->
                    <div class="stats-container">
                        <!-- Health Bar -->
                        <div class="stat-item">
                            <div class="stat-header">
                                <span class="stat-icon">‚ù§Ô∏è</span>
                                <span class="stat-label">SOUL ENERGY</span>
                                <span class="stat-value" id="healthValue">100/100</span>
                            </div>
                            <div class="stat-bar">
                                <div class="bar-fill health-fill" id="healthBar"></div>
                                <div class="bar-glow" id="healthGlow"></div>
                            </div>
                        </div>

                        <!-- Mana Bar -->
                        <div class="stat-item">
                            <div class="stat-header">
                                <span class="stat-icon">üîÆ</span>
                                <span class="stat-label">COMMAND POWER</span>
                                <span class="stat-value" id="manaValue">50/50</span>
                            </div>
                            <div class="stat-bar">
                                <div class="bar-fill mana-fill" id="manaBar"></div>
                                <div class="bar-glow" id="manaGlow"></div>
                            </div>
                        </div>

                        <!-- XP Bar -->
                        <div class="stat-item">
                            <div class="stat-header">
                                <span class="stat-icon">‚≠ê</span>
                                <span class="stat-label">EXPERIENCE</span>
                                <span class="stat-value" id="xpValue">0/100</span>
                            </div>
                            <div class="stat-bar">
                                <div class="bar-fill xp-fill" id="xpBar"></div>
                            </div>
                        </div>

                        <!-- Quick Stats -->
                        <div class="quick-stats">
                            <div class="quick-stat">
                                <span class="quick-icon">üí∞</span>
                                <span class="quick-label">Soul Shards:</span>
                                <span class="quick-value" id="goldValue">1,250</span>
                            </div>
                            <div class="quick-stat">
                                <span class="quick-icon">üéØ</span>
                                <span class="quick-label">Souls Collected:</span>
                                <span class="quick-value" id="killsValue">0</span>
                            </div>
                            <div class="quick-stat">
                                <span class="quick-icon">üìç</span>
                                <span class="quick-label">Realm:</span>
                                <span class="quick-value" id="locationValue">Sanctuary</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Equipment Section -->
                <div class="equipment-section">
                    <div class="section-title">
                        <span class="section-icon">üéí</span>
                        SOUL EQUIPMENT
                    </div>
                    
                    <div class="equipment-grid">
                        <!-- Row 1 -->
                        <div class="equip-slot primary" onclick="useEquipment('weapon')">
                            <div class="slot-icon" id="weaponIcon">‚öîÔ∏è</div>
                            <div class="slot-label">Weapon</div>
                            <div class="slot-name" id="weaponName">Iron Sword</div>
                        </div>
                        
                        <div class="equip-slot secondary" onclick="useEquipment('skill')">
                            <div class="slot-icon" id="skillIcon">üí•</div>
                            <div class="slot-label">Soul Skill</div>
                            <div class="slot-name" id="skillName">Slam</div>
                        </div>
                        
                        <!-- Row 2 -->
                        <div class="equip-slot armor" onclick="useEquipment('armor')">
                            <div class="slot-icon" id="armorIcon">üõ°Ô∏è</div>
                            <div class="slot-label">Armor</div>
                            <div class="slot-name" id="armorName">Leather</div>
                        </div>
                        
                        <div class="equip-slot accessory" onclick="useEquipment('accessory')">
                            <div class="slot-icon" id="accessoryIcon">üíé</div>
                            <div class="slot-label">Artifact</div>
                            <div class="slot-name" id="accessoryName">Crystal</div>
                        </div>
                        
                        <!-- Row 3 -->
                        <div class="equip-slot consumable" onclick="useEquipment('potion')">
                            <div class="slot-icon" id="potionIcon">üß™</div>
                            <div class="slot-label">Elixirs</div>
                            <div class="slot-name" id="potionName">3x</div>
                        </div>
                        
                        <div class="equip-slot special" onclick="useEquipment('special')">
                            <div class="slot-icon" id="specialIcon">üåü</div>
                            <div class="slot-label">Soul Bond</div>
                            <div class="slot-name" id="specialName">Dragon</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Right Column: Game Log & Commands -->
            <div class="right-column">
                <!-- Game Log -->
                <div class="game-log-section">
                    <div class="log-header">
                        <span class="section-icon">üìú</span>
                        SOUL CHRONICLE
                        <button class="clear-log" onclick="clearGameLog()">üóëÔ∏è Clear</button>
                    </div>
                    
                    <div class="log-container" id="gameLog">
                        <div class="log-entry welcome">
                            <span class="log-time">[00:00]</span>
                            <span class="log-content">üåü WELCOME TO SOUL COMMANDER! üåü</span>
                        </div>
                        <div class="log-entry system">
                            <span class="log-time">[00:00]</span>
                            <span class="log-content">‚öîÔ∏è Your journey begins in the Sanctuary...</span>
                        </div>
                        <div class="log-entry system">
                            <span class="log-time">[00:00]</span>
                            <span class="log-content">üí° Type commands or use quick actions below</span>
                        </div>
                    </div>
                    
                    <div class="log-stats">
                        <span class="log-stat">üìä Day: <span id="gameDay">1</span></span>
                        <span class="log-stat">‚è±Ô∏è Playtime: <span id="playTime">0:00</span></span>
                        <span class="log-stat">üî• Streak: <span id="streak">0</span> days</span>
                    </div>
                </div>

                <!-- Command Input -->
                <div class="command-section">
                    <div class="command-header">
                        <span class="section-icon">‚å®Ô∏è</span>
                        COMMAND TERMINAL
                        <button class="history-btn" onclick="showCommandHistory()">üìã History</button>
                    </div>
                    
                    <div class="command-input-container">
                        <div class="command-prefix">&gt;</div>
                        <input type="text" 
                               id="commandInput" 
                               class="command-input" 
                               placeholder="Enter command (fight, explore, inventory, help...)"
                               autocomplete="off"
                               autocapitalize="none"
                               spellcheck="false"
                               onkeydown="handleCommandKey(event)">
                        <button class="command-submit" onclick="executeCommand()" id="submitBtn">
                            <span class="submit-text">EXECUTE</span>
                            <span class="submit-icon">‚ö°</span>
                        </button>
                    </div>
                    
                    <!-- Command Suggestions -->
                    <div class="suggestions-container" id="suggestionsBox">
                        <div class="suggestion" onclick="setCommand('fight goblin')">‚öîÔ∏è fight [enemy]</div>
                        <div class="suggestion" onclick="setCommand('explore forest')">üå≤ explore [area]</div>
                        <div class="suggestion" onclick="setCommand('inventory')">üéí inventory</div>
                        <div class="suggestion" onclick="setCommand('stats')">üìä stats</div>
                        <div class="suggestion" onclick="setCommand('rest')">üõå rest</div>
                        <div class="suggestion" onclick="setCommand('shop')">üè™ shop</div>
                    </div>
                    
                    <!-- Quick Actions -->
                    <div class="quick-actions">
                        <button class="action-btn fight" onclick="quickAction('fight')">
                            <span class="action-icon">‚öîÔ∏è</span>
                            <span class="action-text">COMBAT</span>
                        </button>
                        <button class="action-btn explore" onclick="quickAction('explore')">
                            <span class="action-icon">üå≤</span>
                            <span class="action-text">EXPLORE</span>
                        </button>
                        <button class="action-btn rest" onclick="quickAction('rest')">
                            <span class="action-icon">üõå</span>
                            <span class="action-text">REST</span>
                        </button>
                        <button class="action-btn inventory" onclick="quickAction('inventory')">
                            <span class="action-icon">üéí</span>
                            <span class="action-text">GEAR</span>
                        </button>
                    </div>
                </div>

                <!-- Quest & Progress -->
                <div class="quest-section">
                    <div class="section-title">
                        <span class="section-icon">üéØ</span>
                        ACTIVE QUEST
                    </div>
                    <div class="quest-content" id="questContent">
                        <div class="quest-title" id="questTitle">Initiate's Trial</div>
                        <div class="quest-desc" id="questDesc">Defeat 3 enemies to prove your worth</div>
                        <div class="quest-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="questProgress" style="width: 0%"></div>
                            </div>
                            <div class="progress-text" id="questProgressText">0/3</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Footer -->
        <footer class="game-footer">
            <div class="footer-left">
                <span class="footer-text">‚ö° Powered by Soul Engine v1.0</span>
                <span class="footer-text">üåê <span id="connectionStatus">Connected</span></span>
            </div>
            <div class="footer-center">
                <span class="footer-text">üéÆ Soul Commander ¬© 2024</span>
            </div>
            <div class="footer-right">
                <button class="footer-btn" onclick="toggleFullscreen()" id="fullscreenBtn">‚õ∂ Fullscreen</button>
                <button class="footer-btn" onclick="showCredits()">üë®‚Äçüíª Credits</button>
                <button class="footer-btn" onclick="shareGame()">üì§ Share</button>
            </div>
        </footer>
    </div>

    <!-- Modals -->
    <div id="helpModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>‚ùì SOUL COMMANDER HELP</h2>
                <button class="modal-close" onclick="closeModal('helpModal')">√ó</button>
            </div>
            <div class="modal-body">
                <!-- Help content will be injected here -->
            </div>
        </div>
    </div>

    <div id="inventoryModal" class="modal">
        <!-- Inventory modal -->
    </div>

    <!-- Audio Elements -->
    <audio id="bgMusic" loop>
        <source src="assets/sfx/music.mp3" type="audio/mpeg">
    </audio>
    
    <audio id="sfxClick" preload="auto">
        <source src="assets/sfx/click.wav" type="audio/wav">
    </audio>
    
    <audio id="sfxCombat" preload="auto">
        <source src="assets/sfx/combat.wav" type="audio/wav">
    </audio>

    <!-- Game Scripts -->
    <script src="game.js"></script>
    <script src="multiplayer.js"></script>
    
    <!-- Initialize Game -->
    <script>
        // Initialize when page loads
        window.addEventListener('load', () => {
            initSoulCommander();
        });
        
        // Prevent context menu on long press
        document.addEventListener('contextmenu', (e) => {
            if (e.target.classList.contains('equip-slot') || 
                e.target.classList.contains('action-btn')) {
                e.preventDefault();
            }
        });
    </script>
</body>
</html>